<style>
	.dist {
		display: none;
	}
	.btn-group:first-child {
		width: 100%;
	}
	.cur {
		text-align: center;
	}
	#templateCon label{width:80px;}
	#templateBox{width:550px;}
</style>
<div class="widget-main">
	<div class="row">
		<div class="col-lg-12">
			<!-- <h3 class="header smaller lighter blue">仓位管理</h3> -->
			<div class="row" style="margin-top: 20px;" id="topTool">
				<!--<h3 class="header smaller lighter blue">送单</h3>-->
				<div class="col-sx-4" style=" float: left;margin-right:5px;">
					<input type="text" pts=0 sear="ckm_position.name" placeholder="仓位名称" class="kh_code" />
				</div>
				<div class="col-sx-4" style=" float: left;margin-right:5px;">
					<input type="text" pts=1 area="1" placeholder="区域名称" class="kh_name" />
				</div>
				<div class="col-sx-4" style=" float: left;margin-right:5px;">
					<button type="button" title="搜索" id="search" class="btn btn-info btn-sm">
	                    <i class="fa fa-search"></i>
	                </button>
				</div>
				<div class="col-sx-4" style=" float: left;margin-right:5px;">
					<button id="heightsearch" title="高级搜索" type="button" class="btn btn-info btn-sm" style="background-color: #00c0ef !important;">
                        <i class="fa fa-filter"></i>
                    </button>
				</div>
				<div class="col-sx-4" style=" float: left;margin-right:5px;">
					<button id="flush" title="刷新" type="button" class="btn btn-info btn-sm" style="background-color: #32CD32	 !important;">
	                    <i class="fa fa-refresh"></i>
	                </button>
				</div>
				<div class="col-sx-4" contentAuthority="213" style=" float: left;margin-right:5px;">
                	<button type="button" title="添加" id="add" class="btn btn-info btn-sm" style="background-color: #32CD32	 !important;">
                        <i class="fa fa-plus"></i>
                   </button>
				</div>
				<div class="col-sx-4" style=" float: left;margin-right: 5px; margin-bottom:5px;">
					<label type="button" title="导入" id="mergeItem" style="background-color: #1E9FFF!important; border-color: #1E9FFF;"
	                                class="btn btn-info btn-sm mergeItem" for="leading-in" >
	                            <i class="fa fa-sign-in"></i>
	           		</label>
           		</div>
				<div class="col-sx-4" id="expbt" style="display: none; float: left; margin-right: 5px;">
					<button type="button"  title="导出" style="outline: none;background-color: #1E9FFF !important; border-color: #1E9FFF;" class="exportfile moveToClue btn addBtn btn-info btn-sm position-relative">
						<i class="fa fa-sign-out"></i>
					</button>
				</div>
				
              <div id="heightsearch1" class="col-sx-12" style="margin-top:30px;position: absolute; background: #fff; z-index: 1041;overflow: auto; padding: 10px 0px; display: none;">
				<div class="row">
					<div class="col-sx-4" style=" float: left; margin-bottom:5px;">
						<label>仓位编号</label>
						<select>
							<option> = </option>
						</select>
						<input type="text" gjs=9 sear="ckm_position.num" />
					</div>
					<div class="col-sx-4" style=" float: left; margin-bottom:5px;">
						<label>区域名称</label>
						<select>
							<option> = </option>
						</select>
						<input type="text" gjs=7 marketing-id="3" />
					</div>
					<div class="col-sx-4" style=" float: left; margin-bottom:5px;">
						<label>仓位名称</label>
						<select>
							<option> = </option>
						</select>
						<select gjs=0 sear="ckm_position.id" class="cw" data-type="gj" style="width:180px;">
					</select>
					</div>
					<div class="col-sx-4" style=" float: left; margin-bottom:5px;">
						<label>整单负责人</label>
						<select>
							<option> = </option>
						</select>
						<select style="width: 180px" gjs=2 sear="zd" class="advandced-search select2-hidden-accssible" tabindex="-1" aria-hidden="true">
							<option value="">请选择</option>
						</select>
					</div>
					<div class="col-sx-4" style=" float: left; margin-bottom:5px;">
						<label>做账负责人</label>
						<select>
							<option> = </option>
						</select>
						<select style="width: 180px" gjs=2 sear="zz" class="advandced-search select2-hidden-accssible" tabindex="-1" aria-hidden="true">
							<option value="">请选择</option>
						</select>
					</div>
					<div class="col-sx-4" style=" float: left; margin-bottom:5px;">
						<label>报税负责人</label>
						<select>
							<option> = </option>
						</select>
						<select style="width: 180px" gjs=2 sear="bs" class="advandced-search select2-hidden-accssible" tabindex="-1" aria-hidden="true">
							<option value="">请选择</option>
						</select>
					</div>
					<div class="col-sx-4" style=" float: left; margin-bottom:5px;">
						<label>客服负责人</label>
						<select>
							<option> = </option>
						</select>
						<select style="width: 180px" gjs=2 sear="kf" class="advandced-search select2-hidden-accssible" tabindex="-1" aria-hidden="true">
							<option value="">请选择</option>
						</select>
					</div>
					<div class="col-sx-4" style=" float: left; margin-bottom:5px;">
						<label>送单负责人</label>
						<select>
							<option> = </option>
						</select>
						<select style="width: 180px" gjs=2 sear="sod" class="advandced-search select2-hidden-accssible" tabindex="-1" aria-hidden="true">
							<option value="">请选择</option>
						</select>
					</div>
					<div class="col-sx-4" style=" float: left; margin-bottom:5px;">
						<label>收单负责人</label>
						<select>
							<option> = </option>
						</select>
						<select style="width: 180px" gjs=2 sear="sd" class="advandced-search select2-hidden-accssible" tabindex="-1" aria-hidden="true">
							<option value="">请选择</option>
						</select>
					</div>
					<div style="text-align:center;clear:both;padding-top:10px; ">
						<button type="button" id="search1" class="search1 btn btn-info btn-sm" style="width:180px;">
		                        查询
		                    </button>
		                     <button type="button" id="rest" class=" btn btn-info btn-sm" style="width:180px;">
		                       重置
		                    </button>
					</div>
				</div>
			</div>

			</div>

			
			<div class="custom_table">
				<table id="dynamic-table" style="margin-bottom:0px;">
					<thead>
						<tr class="thColor">
							<th class=" center">操作</th>
							<th class="center thColor" data-num="1">仓位编号</th>
							<th class="center" data-num="2">区域名称</th>
							<th class=" center" data-num="3">仓位</th>
							<th class=" center " data-num="4">客户数量</th>
							<th class=" center" data-num="5">整单负责人</th>
							<th class=" center" data-num="6">做账负责人</th>
							<th class=" center" data-num="7">报税负责人</th>
							<th class=" center" data-num="8">客服负责人</th>
							<th class=" center" data-num="9">送单负责人</th>
							<th class=" center" data-num="10">收单负责人</th>
						</tr>
					</thead>

					<tbody id="dataList">

					</tbody>

				</table>
				
			</div>
			<div align="center" style="margin-top: 20px; margin-bottom: 20px;">
					<div align="left" style="padding-left: 15px; float: left; width: 10%;" id="num"></div>
					<!--<div id="pagination" style="float: left; width: 80%; height: 25px;"></div>-->
					<div id="pageBar" class="pagination"></div>
					<div align="right" style="float: right; margin-right: 15px;  width: 10%;">
						<select style="width: 100px;" id="changePageNum">
							<option value="10">每页10条</option>
							<option value="20">每页20条</option>
							<option value="50">每页50条</option>
							<option value="100">每页100条</option>
							<option value="200">每页200条</option>
						</select>
					</div>
				</div>
		</div>
	</div>

	<div class="row" id="template" style="display:none;">

		<div class="col-sm-12">
			<div class="space-12"></div>

			<div class="widget-box">				

				<div class="row">
					<div class="col-xs-12">
						<form class="form-horizontal" role="form">
							<div class="form-group">
								<label class="control-label col-xs-12  col-sm-3 no-padding-left "> 仓位名称： </label>
								<input type="text" id="cnumber1" addfield="name">
							</div>
							<div class="form-group">
								<label class="control-label col-xs-12  col-sm-3 no-padding-left "> 区域： </label>
								<span id="city" title_="area">
			                        <select class="prov"></select>   
			                        <select class="city" disabled="disabled"></select>  
			                        <select class="dist" style="display: none;" disabled="disabled"></select>  
			                    </span>
							</div>
							<div class="form-group">
								<label class="control-label col-xs-12  col-sm-3 no-padding-left "> 收单负责人： </label>
								<select multiple="" id="state0" name="state" addfield="sd" class="state select2 select2-hidden-accessible" data-placeholder="选择收单负责人" style="width: 200px;" tabindex="-1" aria-hidden="true">
								</select>
							</div>

							<div class="form-group">
								<label class="control-label col-xs-12  col-sm-3 no-padding-left "> 整单负责人： </label>
								<select multiple="" id="state1" name="state" addfield="zd" class=" state select2 select2-hidden-accessible" data-placeholder="选择整单负责人" style="width: 200px;" tabindex="-1" aria-hidden="true">
								</select>
							</div>
							<div class="form-group">
								<label class="control-label col-xs-12  col-sm-3 no-padding-left "> 做账负责人： </label>
								<select multiple="" id="state2" name="state" addfield="zz" class="state select2 select2-hidden-accessible" data-placeholder="选择做账负责人" style="width: 200px;" tabindex="-1" aria-hidden="true">
								</select>
							</div>
							<div class="form-group">
								<label class="control-label col-xs-12  col-sm-3 no-padding-left "> 报税负责人： </label>
								<select multiple="" id="state3" name="state" addfield="bs" class="state select2 select2-hidden-accessible" data-placeholder="选择报税负责人" style="width: 200px;" tabindex="-1" aria-hidden="true">
								</select>
							</div>
							<div class="form-group">
								<label class="control-label col-xs-12  col-sm-3 no-padding-left "> 客服负责人： </label>
								<select multiple="" id="state4" name="state" addfield="kf" class="state select2 select2-hidden-accessible" data-placeholder="选择客服负责人" style="width: 200px;" tabindex="-1" aria-hidden="true">
								</select>
							</div>
							<div class="form-group">
								<label class="control-label col-xs-12  col-sm-3 no-padding-left "> 送单负责人： </label>
								<select multiple="" id="state5" name="state" addfield="sod" class="state select2 select2-hidden-accessible" data-placeholder="选择送单负责人" style="width: 200px;" tabindex="-1" aria-hidden="true">
								</select>
							</div>
						</form>
					</div>
					<!--保存按钮-->
					<div class=" padding-4 clearfix">
						<div class="btn-group pull-right">
							<div class="cur">
							<button class="btn btn-info" id="submit">
                                    <i class="fa fa-check" aria-hidden="true"></i>
                                    保存
                                </button>
                                </div>
						</div>
					</div>
				</div>

			</div>
		</div>
	</div>
	<div class="label_popup" id="export" style="position:fixed;top:0;right:0;bottom:0;left:0;z-index:1050;display:none;">
		<div style="width:400px;margin:39px auto;z-index:1060;background:#fff;position:relative;border:1px solid #ddd;
	            box-shadow:0px 0px 15px rgba(0, 0, 0, 0.2);">
			<div style="padding:15px;border-bottom:1px solid #ddd;">
				<span style="display: inline-block;">导入仓位</span>
				<a href="javascript:;" class="close_label" style="float: right;"><i class="fa fa-times" aria-hidden="true"></i></a>
			</div>
			<div style="padding: 10px 50px;">
				<input type="file" width="200px" style="margin: auto;" id="efile" />
				<!--<hr>-->
			</div>
			<div style="padding:15px;text-align:right;">
				<button id="ghItem"  class=" btn">仓位模板</button>
				<button class="btn btn-info  submit" style="padding: 6px; border-radius: 0px;">保存</button>
			</div>
		</div>
	</div>

	{% include 'admin/mark.html' %}
</div>
<script src="/resource/adimin/assets/js/src/public.js"></script>
<script src="/resource/adimin/assets/js/src/jquery.cityselect.js"></script>
<script>
	jQuery(function($) {
		cs.getNodes([213]);

        //导出功能
        cs.exportFile({
            url:"/api/api_accountancies/cw_export",
            title:"仓位管理"

        });
        if(cs.getNodes([311], true)) {
            $("#expbt").show();
        }

		var order ='ckm_position.id';
		var page_size = 10;
		var resData = '';
		var employees= {};
		var filter = ''; //过滤条件
		//获取所有员工
        ykp.doAjax({
        	async:false,
            url:'/api/api_employees/f7',
            method:'post',
            data:{
                select:'bmm_employees.id,bmm_employees.name'
            },
            success:function(res){
                var data = res.data;
                $('.advandced-search').select2({allowClear:true});
                for(var i in data){
                	if(data[i]['name']) {
                    employees[data[i]['id']] =data[i]['name'] ;
                    $('.advandced-search').append(new Option(data[i]['name'],data[i]['id']));
                }
                }
            }
        });
		
		//通用排序
		cs.general_sort({
			url: '/api/api_accountancies/list_position',
			method: 'post',
			data: {
				filter:filter,
				limit: page_size
			},
			pageBar: {
				id: '.pageBar'
			},
			contentId:"#datalist",  //默认排序
			initOrder:"",   //初始化sort
			defaultOrder:order,
			params:[{
				id:"#dynamic-table",
				field:["","ckm_position.num","ckm_position.city","ckm_position.name"]
			}]
		}, function(res, _sort_role) {
			sort_role = _sort_role;
			addList(res);
		});
		
		cs.getAllCw(function(option) {
			$('#heightsearch1 .cw').html(option);
			$('#heightsearch1 .cw').select2({
				allowClear: true
			})
		})

		//高级搜索按钮
		cs.showHeightSearch('#heightsearch','#heightsearch1');
		
		hSearch();
		
		function hSearch() {
			var data = {
				url: '/api/api_accountancies/list_position',
				methods: 'post',
				data: {
					limit:page_size,
					order:order
				}
			}
			cs.hSearch('.search1', data, 'filter', false, function(res, _filter) {
					filter = _filter;
					$('.in').removeClass('modal-backdrop');
					$("#heightsearch1").slideUp();
					$("#heightsearch").removeClass('active').css('z-index','');
					resData = res.data.items;
					if(res.data.items == "") {
						setTimeout(function(){
                        	ykp.prompt('暂无数据！');
                    	},1000);
						$('#dataList').html('<tr><td colspan="30"><div class="table-actions clearfix"></div> <div style="color:#7d7d7d !important;text-align:center !important;" class="page">暂无数据</div></td></tr>');
						return false;
					}else {
						addList(res);
					}
				})
		}
		
		seaarch();

		function seaarch() {
			var data = {
				url: '/api/api_accountancies/list_position',
				method: 'post',
				data: {
					limit: page_size,
					order:order
				}
			}
			cs.doSearch('#search', data, 'filter', false, function(res, _filter) {
				filter = _filter;
				resData = res.data.items;
				if(res.data.items == "") {
					setTimeout(function(){
                        ykp.prompt('暂无数据！');
                    },1000);
					$('#dataList').html('<tr><td colspan="30"><div class="table-actions clearfix"></div> <div style="color:#7d7d7d !important;text-align:center !important;" class="page">暂无数据</div></td></tr>');
					return false;
				} else {
					addList(res);
				}
			})
		}

		$('#changePageNum').change(function() {
			page_size = $(this).val();
			ykp.setCookie('page_size', page_size);
			getList(1);
		})

		$('#flush').click(function(){
			$('#topTool input').val('');
			filter = '';
			ykp.setCookie("filter", "");
			ykp.setCookie("where", "");
			getList();
		})

		getList(1, 1);

		function getList(curent, isInit) {
			if(isInit == 1){
				ykp.setCookie("filter", "");
				ykp.setCookie("where", "");
			}
			seaarch();
			hSearch();
			ykp.list({
				url: '/api/api_accountancies/list_position',
				method: 'post',
				data: {
					limit: page_size,
					filter: filter
				},
				pageBar: {
					id: '#pageBar'
				},
				loadList: function(res) {
					if(res.data.items == "") {
						setTimeout(function(){
                        ykp.prompt('暂无数据！');
                    },1000);
						$('#dataList').html('<tr><td colspan="30"><div class="table-actions clearfix"></div> <div style="color:#7d7d7d !important;text-align:center !important;" class="page">暂无数据</div></td></tr>');
						return false;
					}

					resData = res.data.items;
					addList(res);

//					checkName('1,2');
				}
			});

		}

		function checkName(col, data) {
			var arr = [];
//			if(col){
				col.split(',').forEach(function(item) {
					if(employees[item]){
						arr.push(employees[item])
					}
				})
//			}
			
			return arr.join(',');
		}
		
		//导入导出
		var data = {
			Url:"/resource/excel_templete/postion.xlsx",
			type:'2',
			title:'仓位模板',
			key:'position',
			url1:'/api/api_inventory/upload_position'
		}
		cs.jzexport(data,function(res) {
			if(res.data) {
				ykp.prompt("上传信息有误");
				window.open(res.data);
			}else{
				ykp.prompt("上传成功");
				window.location.reload();
			}
			$('.label_popup').hide();
	        getList(1);
		})
		
		
		cs.custorm_check('#dynamic-table', '#dataList', true);

		function addList(res) {
			var data = res.data.items;
			var html = '';
			var styles = [];
            $('#dynamic-table th').each(function(i,e){
                styles.push($(this).css('display'));
            });

			for(var i in data) {
				html += `<tr data-id=${data[i]['ckm_position.id']} num="${data[i]['number']}">

		            <td class="center">
			            <label class="pos-rel">
			            <a href="#" id="edit${i}" class="edit btBlue" contentAuthority="214" title="编辑"><i class="fa fa-pencil-square-o"></i></a>
			             <a href="#"  class="del btRed" style="display: ${data[i]['number'] == 0 ? 'inline-block' : 'none'};" contentAuthority="214" title="删除"><i class="fa fa-trash-o"></i></a>
			        	</label>
			        </td>
		            <td class="center" style="display:${styles[1]}" data-num="1">
		            <span class="lbl edit4">${data[i]['ckm_position.num']}</span>
		            </td>
		            <td class="center" style="display:${styles[2]}" data-num="2">
		            <span class="lbl edit4">${data[i]['ckm_position.city']}</span>
		            </td>
		            <td class="center" style="display:${styles[3]}" data-num="3">
		            <span class="lbl edit4">${data[i]['ckm_position.name']}</span>
		            </td>
		            <td class="center" style="display:${styles[4]}" data-num="4">
		            <span class="lbl edit4">${data[i]['number']}</span>
		            </td>
		
		            <td class="center" style="display:${styles[5]}" data-num="5">
		            <span class="lbl edit4">${checkName(data[i]['ckm_position.zd'])}</span>
		            </td>
		            <td class="center" style="display:${styles[6]}" data-num="6">
		            <span class="lbl edit4">${checkName(data[i]['ckm_position.zz'])}</span>
		            </td>
		
		            <td class="center" style="display:${styles[7]}" data-num="7">
		            <span class="lbl edit4">${checkName(data[i]['ckm_position.bs'])}</span>
		            </td>
		            <td class="center" style="display:${styles[8]}" data-num="8">
		            <span class="lbl edit4">${checkName(data[i]['ckm_position.kf'])}</span>
		            </td>
		            <td class="center" style="display:${styles[9]}" data-num="9">
		            <span class="lbl edit4">${checkName(data[i]['ckm_position.sod'])}</span>
		            </td>
		             <td class="center" style="display:${styles[10]}" data-num="10">
		            <span class="lbl edit4">${checkName(data[i]['ckm_position.sd'])}</span>
		            </td>
		            
		        </tr>`;
			}
			$('#dataList').html(html);

			cs.getNodes([214]);

			$('#dataList tr').find('.edit').click(function() {
				var id = $(this).parents('tr').attr('data-id'); //获取id值
				var index = $(this).parents('tr').index();
				showMark('#template');
				$('#showBox .title').text('编辑');
				$("#templateCon #city").citySelect({
					url: "/resource/adimin/assets/js/src/city.min.js",
					prov: resData[index]['ckm_position.province'] ? resData[index]['ckm_position.province'] : '广东', //省份 
					city: resData[index]['ckm_position.city'] ? resData[index]['ckm_position.city'] : '深圳', //月份
					nodata: "none" //当子集无数据时，隐藏select  
				});
				//获取所有员工
				ykp.doAjax({
					url: '/api/api_employees/f7',
					method: 'post',
					data: {},
					success: function(res) {
						var data = res.data;
						for(var i in data) {
							if(data[i]['bmm_employees.name']) {
							$('#templateCon .state').append(new Option(data[i]['bmm_employees.name'], data[i]['bmm_employees.id']));
						}
					}
						select2();
						$("#templateCon ").find('input[type="text"]').eq(0).val(resData[index]['ckm_position.name']);
						//给选项框赋值  设置默认选中项
						$("#templateCon #state0").val(resData[index]['ckm_position.sd'].split(",")).trigger('change');
						$("#templateCon #state1").val(resData[index]['ckm_position.zd'].split(",")).trigger('change');
						$("#templateCon #state2").val(resData[index]['ckm_position.zz'].split(",")).trigger('change');
						$("#templateCon #state3").val(resData[index]['ckm_position.bs'].split(",")).trigger('change');
						$("#templateCon #state4").val(resData[index]['ckm_position.kf'].split(",")).trigger('change');
						$("#templateCon #state5").val(resData[index]['ckm_position.sod'].split(",")).trigger('change');
						submit(false, id);
					}
				});
				//				select2();	
			})
			
			//删除
			$('.del').click(function() {
				var id = $(this).parents('tr').attr('data-id');
				var num = $(this).parents('tr').attr('num');
				if(num > 0){
					ykp.prompt('有客户不能删除');
					return false;
				}
//				bootbox.confirm('确认删除该仓位？',function(flag){
//					if(flag){
//						ykp.doAjax({
//							url: '/api/api_accountancies/del_position',
//							method: 'post',
//							data: {
//								id: id
//							},
//							success: function(res) {
//								ykp.prompt('删除成功!');
//								getList(1);
//							}
//						})
//					}
//				});
			layui.use('layer',function(){
				var layer =layui.layer;
				layer.confirm('确认删除该仓位？',function(flag){
							if(flag){
						ykp.doAjax({
							url: '/api/api_accountancies/del_position',
							method: 'post',
							data: {
								id: id
							},
							success: function(res) {
								ykp.prompt('删除成功!');
								layer.closeAll();
								getList(1);
							}
						})
					}
					
				})
			})
				
			})

			//全选
			checkAll();

		}

		pageinfo();

		function pageinfo() {
			//添加仓位
			$('#add').click(function() {
				showMark('#template');
				$('#showBox .title').text('添加仓位');
				$("#templateCon #city").citySelect({
					url: "/resource/adimin/assets/js/src/city.min.js",
					prov: '北京', //省份 
					city: '东城区',
					nodata: "none" //当子集无数据时，隐藏select  
				});
				//获取所有员工
				ykp.doAjax({
					url: '/api/api_employees/f7',
					method: 'post',
					data: {},
					success: function(res) {
						var data = res.data;
						for(var i in data) {
							if(data[i]['bmm_employees.name']) {
							$('#templateCon .state').append(new Option(data[i]['bmm_employees.name'], data[i]['bmm_employees.id']));
						}
						}
						
						submit(true);
					}
				});

				select2();

			})
		}

		//添加编辑提交仓位
		function submit(type, id) {
			var data = {};
			var objs;
			var ids = '';
			var status = false;
			$('#templateCon #submit').click(function() {
				//获取所有选项框的值
				$('#templateCon .state').each(function(i) {
					objs = $('#templateCon #state' + i).select2('data');
					for(var j in objs) {
						ids += objs[j].id + ','
					}
					data[$(this).attr('addfield')] = ids.substr(0, ids.length - 1);
					ids = '';
				})
				$('#templateCon .state').each(function(i) {
					if(data[$(this).attr('addfield')] == "") {
						ykp.prompt('所有责任人选项框不能为空');
						status = false;
						return false;
					} else {
						status = true;
					}
				})
				$('#templateCon').find('input[addfield]').each(function() {
					if($(this).val() == "") {
						ykp.prompt('所有输入框不能为空!');
						status = false;
						return false;
					} else {
						data[$(this).attr('addfield')] = $(this).val().trim();
					}
				})
				data.province = $('#templateCon .prov').val();
				data.city = $('#templateCon .city').val();
				if(!type) {
					data.id = id;
				}
				if(status) {
					ykp.doAjax({
						url: '/api/api_accountancies/add_edit_position',
						method: 'post',
						data: data,
						success: function(res) {
							ykp.prompt('添加成功!');
							cs.close();
							getList(1);
						}
					})
				}
			})
		}

	});

	function select2() {
		//参与人员
		$('#templateCon .select2').css('width', '435px').select2({
			allowClear: true
		})
		$('#select2-multiple-style .btn').on('click', function(e) {
			var target = $(this).find('input[type=radio]');
			var which = parseInt(target.val());
			if(which == 2)
				$('.select2').addClass('tag-input-style');
			else
				$('.select2').removeClass('tag-input-style');
		});
	}

	function checkAll(status) {
		$("tbody input[name='check']").each(function(i, n) {
			n.checked = status;
		});
	}
</script>